var n;Array.prototype.includes||(Array.prototype.includes=function(a,b){return 0<=this.indexOf(a,b)});NodeList.prototype[Symbol.iterator]||(NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);HTMLCollection.prototype[Symbol.iterator]||(HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);const aa=Boolean,ba=Array.isArray,v=RegExp.prototype.test,ca=RegExp.prototype.exec,da=Array.prototype.includes;Array.prototype.concat.bind([]);
const ea=Function.call.bind(Array.prototype.slice),fa=Function.apply.bind(Array.prototype.push),ha=Function.apply.bind(String.fromCharCode,null),w=Math.floor,x=Math.random,y="undefined"==typeof browser;y&&(browser=chrome);const z=navigator.userAgent.includes("Edge/"),ka=navigator.userAgent.includes("Edg/"),D=navigator.userAgent.includes("Firefox/"),la=navigator.userAgent.includes("OPR/"),ma=navigator.userAgent.includes("YaBrowser/");var E,na,F,oa,pa,qa;const ra=D?69:z?77:66,sa=D?220:150,ta=browser.runtime.getManifest();
var ua=ta.permissions.includes("notifications")||null;const wa=va("tooltip_title"),xa=va("tooltip_disabled"),ya="\n"+va("tooltip_text"),za={16:"images/logo16.png",32:"images/logo32.png"},Aa={16:"images/logo16x.png",32:"images/logo32x.png"},J=["127.0.0.1:1001","0.1.0.1:1001"],Ba=y?"Chrome_RenderWidgetHostHWND":D?"MozillaWindowClass":z?"Windows.UI.Core.CoreWindow":null,Ca=/(?!)/,Da=["main_frame","sub_frame"],Ea=["object","image"];
var Fa=Ea.concat("xmlhttprequest",z?"other":[]),Ga=Da.concat(Ea,"xmlhttprequest","other");const K=["*://*/*"],Ha=["ftp://*/*"],Ia=K.concat(Ha,"file:///*",y?"about:blank":[]),Ja=K.concat(y?"about:blank":[]),Ka=y&&btoa(x().toString().substr(2,9)),La=browser.runtime.getURL("captured.html?"+(Ka?"auth="+Ka+"&":"")),Ma=browser.runtime.getURL("welcome.html?"+(Ka?"auth="+Ka+"&":"")),Na=browser.runtime.getURL("").slice(0,-1),Oa=location.href,Pa=la||ma,Qa=y||z,Ra=!D;var Sa=y;
const Ta=v.bind(/^(?:chrome|about|chrome-extension|chrome-search|ms-browser-extension|ms-appx-web|moz-extension):/),Ua=v.bind(/^(?:Host|Origin|Referer|Cookie|User-Agent|Connection|DNT|Accept-Encoding|Sec-.+)$/i),Va=v.bind(/^(?:application\/(?:json|x-javascript)|text\/(?:javascript|plain))$/),Wa=v.bind(/^(HTM|HTML|CGI|PHP|ASP|ASPX|JSP|JSPX)$/i),Xa=v.bind(/^ftp:|^idmreg:|\bidman|\binternetdownloadmanager\b/i),Ya=v.bind(/^[GPTSDVACR]*$/);ca.bind(/:\/\/.+\/([^/]+?(?:\.([^./]+?))?)(?=[?#]|$)/);
const Za=ca.bind(/\.([^.\\/]*?)(?:\.[0-9.]+)?$/),$a=ca.bind(/^v(\d+)\.(\d+)(?:b(\d+))?\b/),ab=da.bind([301,302,303,307,308]),bb=da.bind([301,302,303]),cb=[],db=v.bind(/^(?:https?|socks[45])$/),eb={direct:2,auto_detect:3,system:4,pac_script:5,fixed_servers:7},fb=[null,[115,111,112,113,114],[111,112,114],[112],[111],[111],[111],[111]],gb=[null,[115,116,117,118,119,120,121,123],[114,113,113,115,116,117,118,122,119,121,124,125,120,123,112],[113],[111,113,112,114,115,116],[111,112,113],[],[111]],hb=[null,
2,2,null,2,null,null,2],ib={16:1,17:2,18:4,45:8,46:16},jb={http:1,https:9,ftp:2,ftps:10,idmreg:12,xup:33},kb={"text/html":"HTML|HTM","text/css":"CSS","text/javascript":"JS|JSON","text/mspg-legacyinfo":"MSI|MSP","text/plain":"TXT|VTT|SRT|M3U|PLS|M3U8|MPD|F4M|TORRENT|BTT","text/srt":"SRT","text/vtt":"VTT|SRT","text/xml":"XML|MPD|F4M|TTML|TTML2","text/x-javascript":"JS|JSON","text/x-json":"JSON","application/dash+xml":"MPD","application/f4m+xml":"F4M|MPD","application/gzip":"GZ","application/javascript":"JS",
"application/json":"JSON","application/json+protobuf":"JSON","application/msword":"DOC|DOCX|DOT|DOTX","application/ocsp-response":"OCSP","application/octet-stream-m3u8":"M3U8","application/pdf":"PDF","application/pkix-crl":"CRL","application/torrent":"TORRENT|BTT","application/ttaf+xml":"DFXP","application/ttml+xml":"TTML|TTML2","application/vnd.apple.mpegurl":"M3U8","application/zip":"ZIP","application/x-7z-compressed":"7Z","application/x-aim":"PLJ","application/x-bittorrent":"TORRENT|BTT","application/x-chrome-extension":"CRX",
"application/x-compress":"Z","application/x-compress-7z":"7Z","application/x-compressed":"ARJ","application/x-dosexec":"EXE","application/x-gtar":"TAR","application/x-gzip":"GZ","application/x-gzip-compressed":"GZ","application/x-javascript":"JS","application/x-mpegurl":"M3U8","application/x-msdos-program":"EXE|DLL","application/x-msi":"MSI","application/x-msp":"MSP","application/x-ole-storage":"MSI|MSP","application/x-rar":"RAR","application/x-rar-compressed":"RAR","application/x-sdlc":"EXE|SDLC",
"application/x-shockwave-flash":"SWF","application/x-silverlight-app":"XAP","application/x-subrip":"SRT","application/x-tar":"TAR","application/x-zip":"ZIP","application/x-zip-compressed":"ZIP","video/3gpp":"3GP|3GPP","video/3gpp2":"3GP|3GPP","video/avi":"AVI","video/f4f":"F4F","video/f4m":"F4M","video/flv":"FLV","video/mp2t":"TS|TSV|M3U8","video/mp4":"MP4|M4V|M4S","video/mpeg":"MPG|MPEG","video/mpegurl":"M3U|M3U8","video/mpg4":"MP4|M4V","video/msvideo":"AVI","video/quicktime":"MOV|QT","video/vnd.mpeg.dash.mpd":"MPD",
"video/webm":"WEBM","video/x-flash-video":"FLV","video/x-flv":"FLV","video/x-mp4":"MP4|M4V","video/x-mpegurl":"M3U|M3U8","video/x-mpg4":"MP4|M4V","video/x-ms-asf":"ASF","video/x-ms-wmv":"WMV","video/x-msvideo":"AVI","audio/3gpp":"3GP|3GPP","audio/3gpp2":"3GP|3GPP","audio/mp2t":"TS|TSA|M3U8","audio/mp3":"MP3","audio/mp4":"M4A|MP4|M4S","audio/mp4a-latm":"M4A|MP4","audio/mpeg":"MP3","audio/mpeg4-generic":"M4A|MP4","audio/mpegurl":"M3U|M3U8","audio/webm":"WEBM","audio/wav":"WAV","audio/x-mpeg":"MP3",
"audio/x-mpegurl":"M3U|M3U8","audio/x-ms-wma":"WMA","audio/x-wav":"WAV","ilm/tm":"MP3","image/avif":"AVIF","image/gif":"GIF|GFA","image/icon":"ICO|CUR","image/jpg":"JPG|JPEG","image/jpeg":"JPG|JPEG","image/png":"PNG|APNG","image/tiff":"TIF|TIFF","image/vnd.microsoft.icon":"ICO|CUR","image/webp":"WEBP","image/x-icon":"ICO|CUR","flv-application/octet-stream":"FLV"};
function lb(a,b,c,e,d,f,h){if(a){var g=["MSG#",a,"#",b,"#",c,"#",e];this.j=a;this.type=b;this.o=c;this.l=e;this.a=d||[];this.h=g;if(d)for(a=0;a<d.length;a++)g.push(":",d[a]||0);if(f)for(var l in f)if(d=f[l],null!=d)if(g.push(",",l,"="),d instanceof Array){a=g.length;b=0;for(var k of d)b=k instanceof Uint8Array?b+(h?mb(k=ha(k)):k.length):b+mb(k=k.toString()),g.push(k);g.splice(a,0,b,":")}else"string"==typeof d||d instanceof String?g.push(mb(d),":",d):d instanceof Blob?g.push(d.size,":",d):g.push(d)}else this.i=
new FileReader}function nb(){this.a=nb.prototype.h++}nb.prototype.h=1;function ob(a,b,c,e){this.id=a;this.port=b;c&&(this.b=c=c.toLowerCase(),this.c="iframe"==c);e&&(this.f=e)}ob.prototype.a=0;function pb(a,b,c){this.id=a+","+b;this.c=null==c||0>c?null:a+","+c}function qb(){}function rb(a){a.f||(a.h.push(";"),a.f=!0);return a.h.join("")}function sb(a){a.f||(a.h.push(";"),a.f=!0);return new Blob(a.h)}function tb(a,b,c){a.f?a.c(a):(b.a=c||0,b.b=0,a.i.onload=a.s.bind(a,b),ub(a,b,0,50))}
lb.prototype.s=function(a){for(var b=this.i.result;;)switch(a.b){case 0:var c=b.split(",",2),e=c.shift().split(":",2),d=e.shift();if(!e.length){if(!c.length)return this.c(this);a.b=1}var f=d.length+1;e=d.split("#",6);if(5!=e.length||"MSG"!=e[0])return this.c(this);this.j=parseInt(e[1]);this.type=parseInt(e[2]);this.o=parseInt(e[3]);this.l=parseInt(e[4]);b=b.slice(f);a.a+=f;a.b++;break;case 1:e=b.split(",",2);d=e.shift();if(!e.length){e=b.split(";",2);if(2>e.length)return ub(this,a,b.length,100);a.b=
4}f=d.length+1;e=this.a=d.split(":");for(d=0;d<e.length;d++)c=e[d],e[d]=c.includes(".")?parseFloat(c):parseInt(c);b=b.slice(f);a.a+=f;a.b++;break;case 2:c=b.split(",",2);2>c.length&&(c=b.split(";",2));e=c.shift().split(":",2);var h=e.shift();f=h.length;d=!1;if(e.length)f++;else{if(!c.length)return ub(this,a,b.length,25);d=!0}e=h.split("=",3);if(2!=e.length)return this.c(this);c=parseInt(e[0]);e=parseInt(e[1]);a.a+=f;a.b++;if(d){this[c]=e;b=b.slice(f);a.b++;break}a.f=c;a.c=e;b=a.c;f=a.a;a=a.slice(f,
f+b);a.size==b?this.i.readAsText(a):this.c(this);return;case 3:return this[a.f]=b,a.a+=a.c,a.b++,ub(this,a,0,21);case 4:switch(b[0]){case ",":a.b=2;b=b.slice(1);break;case ";":a.b++;break;default:return this.c(this)}a.a++;break;case 5:this.f=!0;this.g(this);a.size>a.a&&(b=new lb,b.g=this.g,b.c=this.c,tb(b,a,a.a));return}};function ub(a,b,c,e){var d=b.a;c=d+c;b.size>c?a.i.readAsBinaryString(b.slice(d,c+e)):a.c(a)}
function L(){var a=this.constructor.prototype;for(b in a)b.startsWith("_")||"constructor"==b||(this[b]=a[b].bind(this));this.za=[];this.ra=this.v=null;this.u=!1;this.qa=this.V=0;this.fa=null;this.c={};this.i={};this.a={};this.s={};this.b={};this.D={};this.f={};this.g={};this.U={};this.O={};this.h={};this.M={};this.P={};this.P.Qb=[];this.ua=0;this.sa=!1;this.H=null;this.Ba=this.Ka=this.ga=this.l=!1;this.La=!0;this.W=NaN;this.S=!1;this.Ia=!0;this.cb=this.Ja=this.bb=1;this.pa=this.j=this.J=null;this.ta=
1;this.Ma=0;this.C=this.A=null;this.Ca=Ca;this.I=[];this.K=this.o=null;this.ba=Array(16);this.oa=0;this.Ga=null;this.la=this.na=!1;for(a=1;a<fb.length;a++){var b=this.I[a]={};for(var c of fb[a])b[c]=Ca}browser.browserAction&&(y&&browser.browserAction.disable(),z||browser.browserAction.setTitle({title:wa+ya}),browser.browserAction.setIcon({path:822083584>E||z?za[16]:za}),browser.browserAction.setBadgeBackgroundColor({color:"#606060"}),browser.browserAction.onClicked.addListener(this.gb));D&&1056964608<=
E&&browser.contextMenus.onShown.addListener(this.hb);D&&browser.runtime.onInstalled.addListener(this.lb);browser.runtime.onMessage.addListener(this.mb);browser.windows.onCreated.addListener(this.Va);browser.windows.onRemoved.addListener(this.Wa);browser.windows.onFocusChanged.addListener(this.Mb);browser.windows.onBoundsChanged&&browser.windows.onBoundsChanged.addListener(this.Lb);browser.tabs.onActivated.addListener(this.Cb);browser.tabs.onUpdated.addListener(this.Fb);browser.tabs.onRemoved.addListener(this.Eb);
browser.tabs.onAttached&&browser.tabs.onAttached.addListener(this.Db);y&&1056964608<=E&&browser.webRequest.onBeforeRequest.addListener(this.ib,{urls:[browser.runtime.getURL("*")]},["blocking"]);this.Xa();this.va();vb(this,!0)}function wb(){}wb.prototype=[];var M=wb.prototype;wb=null;n=L.prototype;n.hb=function(a,b){xb(this,b.id,!0,!1,!0)};n.lb=function(a){a.version=ta.version;this.ab=a};n.mb=function(a,b){38==a[0]&&browser.tabs.remove(b.tab.id)};
n.gb=function(a){var b=a.id,c=this.h[b];yb(this,b,!c,!0);this.S&&(c?(this.aa(a.windowId),zb(this,b)):Ab(this,b))};function yb(a,b,c,e){if((a.h[b]=c)||e){a=(c?xa:wa)+ya;e=c?Aa:za;if(822083584>E||z)e=e[16];z||browser.browserAction.setTitle({title:a,tabId:b});browser.browserAction.setIcon({path:e,tabId:b});browser.browserAction.setBadgeText({text:c?"X":"",tabId:b})}}
function Bb(a,b){y&&a.l&&browser.downloads.setShelfEnabled(!b);if(b){y&&a.l&&a.G(3,browser.downloads.onCreated,a.jb);y&&a.l&&a.G(3,browser.downloads.onDeterminingFilename,a.kb);b=pa?void 0:Ga;const c=["blocking"],e=y&&!qa&&1207959552<=E?["extraHeaders"]:[];a.G(4,browser.webRequest.onBeforeRequest,a.Ua,{urls:Ha,types:Da},c);a.G(4,browser.webRequest.onBeforeRequest,a.Ua,{urls:K,types:b},["requestBody"]);a.G(4,browser.webRequest.onBeforeSendHeaders,a.Hb,{urls:K,types:b},["requestHeaders"].concat(c,e));
a.G(4,browser.webRequest.onHeadersReceived,a.Jb,{urls:K,types:b},["responseHeaders"].concat(c));a.G(4,browser.webRequest.onResponseStarted,a.Kb,{urls:K,types:b});a.G(4,browser.webRequest.onErrorOccurred,a.Ib,{urls:K,types:b})}else a.Fa(3,4)}
n.Ta=function(a){browser.runtime.lastError;if(a){var b=a.value;a=eb[b.mode];var c,e;this.ba.fill(void 0);if(5==a&&(e=b.pacScript))e.data&&5E4<e.data.length?a=4:(c=e.data)?(a=6,c=c.replace(/\blet\b/g,"var").replace(/,(?=(?:\s*\/\/.*?\n)*\s*[\]}])/g,"")):c=e.url,this.ba.fill(!0);else if(7==a){b=b.rules;e=b.bypassList;c=Cb(this,b.singleProxy);if(!c){c=Cb(this,b.fallbackProxy);var d=Cb(this,b.proxyForHttp,1),f=Cb(this,b.proxyForHttps,9);b=Cb(this,b.proxyForFtp,2);d!=f||d!=b||d!=c&&c?(c=(d||"")+";"+(f||
"")+";"+(b||"")+";"+(c||""),++a):c=d}e&&e.length&&(c+=";"+e.join(","))}b=5>a?a.toString():c?a+":"+c:null;b!=this.o&&(this.o&&this.Da(),this.o=b)}};function Cb(a,b,c){if(b){var e=b.scheme||"http",d="https"==e;a=a.ba;c?a[c]=d:a.fill(d);if(db(e))return e+"://"+b.host+(b.port?":"+b.port:"")}}
function Db(a,b,c,e){if(b){var d=b.type;if("direct"==d)return"0";"socks"==d&&(d="socks5");if(db(d)){var f="1:"+d+"://"+b.host+":"+b.port;"socks5"==d&&b.proxyDNS&&(f+="#");c||e||!(c=a.K)||(c=c.substr(c.indexOf(";")+1||c.length));c&&(f+=";"+c);e&&f&&(a.K=f);return f}}}
n.Da=M[M.length]=function Eb(a,b){if(void 0===a){if((Ra||Sa)&&this.u){var e=this.A;e||(b="http://"+(this.v?(new URL(this.v.url)).host:J[0]),e=b+"/status/204+IDM");a=new XMLHttpRequest;a.timeout=1E3;a.onreadystatechange=Eb.bind(this,a,b);a.open("GET",e,!0);a.send()}}else 4==a.readyState&&(204!=a.status?this.A=this.C=null:b&&(this.A=b+"/status/204+IDM",this.C=Ra&&this.fa?b+"/client/"+this.fa:null))};
function vb(a,b){var c=a.c,e=a.M={};browser.contextMenus.removeAll();for(var d=0;d<Fb.length;d++){var f=Fb[d];f[0]&&(D?b||c[f[1]]:1)&&(e[d]=browser.contextMenus.create({title:va(f[2]),contexts:f[3].split(","),onclick:f[4].bind(a),documentUrlPatterns:f[5]||Ia,enabled:!0}))}}n.ma=function(a,b,c,e){var d=this.f;return b in d?d[b]:d[b]=new ob(b,a,c,e)};function Gb(a,b){a=a.g;var c=b.id;a[c]!==b&&(a[c]=b,z&&(a[b.requestId]=b))}
function Hb(a,b,c,e,d){if(N(b)){var f=b.frameId||0;var h=b.parentFrameId;var g=b.method&&b.id;e||(e=b.tabId);d||(d=b.url)}else f=b;var l=a.s[e+","+f];l||(l=new pb(e,f,h),a.s[l.id]=l);g?(l.g!=g&&(l.g=g,l.j=d,l.f=!1,l.b&&(l.b=d.startsWith(b.initiator||b.originUrl))),l.h="POST"==b.method):d&&(d.startsWith("about:blank")?f&&(l.b=!0):l.m=d);null!=c&&(l.refresh=c);return l}function Ib(a,b){return a.s[b.tabId+","+b.frameId]}function Jb(a){var b=new nb;return a.D[b.a]=b}
function Kb(a,b){delete a.D[b instanceof nb?b.a:b]}function Nb(a,b){a=a.I;for(var c=1;c<a.length;c++){var e=a[c][101];if(e&&e.test(b))return c}return 0}
n.va=function(){var a=this.V%(J.length+1);if(a<J.length){a=J[a];var b=x().toString().substr(2,9);this.v=a=new WebSocket("ws://"+a+"/?cid="+b,"plugin.v3.internetdownloadmanager.com");a.onopen=this.xa;a.onclose=this.N;a.onmessage=this.Bb;a.onerror=O;1==a.readyState?this.xa():3==a.readyState?this.N():a.timeout=window.setTimeout(this.N,1500,a)}else if(z)this.N();else{this.ra=a=browser.runtime.connectNative("com.tonec.idm");try{a.postMessage("")}catch(c){a=null}a?(a.onDisconnect.addListener(this.N),a.onMessage.addListener(this.pb),
this.xa()):this.N()}};n.xa=function(){this.u=!0;this.Ja=1;var a=this.v;a&&a.timeout&&(window.clearTimeout(a.timeout),a.timeout=null);a=browser.i18n.getUILanguage().replace("_","-");"sr"==a&&(a+="-Cyrl-CS");var b=[16,43,Pa?1028:1031,0],c={};c[112]=F;c[113]=na;c[114]=Ba;c[125]=JSON.stringify(this.ab);c[116]=a;P(this,2,1,Pa?0:1024,b,c)};
n.N=function(a){browser.runtime.lastError;var b=a.target||a;if(b instanceof WebSocket&&(b.timeout&&(window.clearTimeout(b.timeout),b.timeout=null),a===b))return b.close();this.v=this.ra=null;this.u&&(this.u=!1,this.U={},Bb(this,!1),this.Fa(1,2),this.S=!1,this.o=this.C=this.A=null,y&&browser.browserAction.disable());a=++this.V;b=J.length+1;var c=a/b;120>c&&(1==c&&this.Ea(),!a||a%b?this.va():window.setTimeout(this.va,5E3*c))};n.Bb=function(a){var b=new lb;b.g=this.Ra;b.c=this.N;tb(b,a.data)};
n.pb=function(a){var b=new lb;b.g=this.Ra;b.c=this.N;tb(b,new Blob([a]))};function P(a,b,c,e,d,f,h){if(!a.u)return!1;var g=a.Ja++;b=new lb(g,b,c,e,d,f,!a.v);if(h)return h.open("POST",a.C+"?seq="+g,!1),h.send(sb(b)),200==h.status;if(h=a.v)h.send(sb(b));else try{a.ra.postMessage(rb(b))}catch(l){return a.N(),!1}e&1&&(a.U[g]=b);return!0}
function Ob(a,b){if(b.a){var c=b.a[1]||b.a[6],e=a.g[c];if(e)return e.c?b.b=e.port.id:null;e=a.i;for(var d in e)if(e[d].f==c)return b.b=d}d=b[6];e=b[17];var f=b[50],h=b[7],g=a.P,l=a.f;a=a.a;var k;if((k=g[d])||(k=g[e]))return b.b=k.id;if(k=g[f])var m=k.id;for(c in l){g=l[c];var p=g.f;if(p){if(p==d||p==e||p==f){k=g.port;if(h){var q=a[k.tabId];q&&q.m!=h&&(k=null)}if(k)return b.b=k.id}if(p==h)var r=g.port.id}}return m?b.b=m:r?b.b=r:null}
n.$a=M[M.length]=function Pb(a,b,c,e){var f;a:for(;!c;){if(f=a.b)return f;if(a.a){var h=this.a[a.a[6]+","+a.a[7]];h?f=h.id:(h=a.a[7])&&this.i[h]&&(f=h)}if(f||(f=Ob(this,a)))break;var g=this.i,l=a[50],k=a[7],m;for(m in g){h=g[m];if(h.m==l){f=m;break a}h.m==k&&(f=m)}if(f)break;return k?browser.tabs.query({url:k},Pb.bind(this,a,b,!0)):null}return c?(browser.runtime.lastError,e&&(e=e.shift())&&(h=this.a[e.id])&&(f=a.b=h.id),b&&b(f)):a.b=f};
n.Na=M[M.length]=function Qb(a,b,c){var d=a.tabId,f=a.Y;if(b)if(ba(c))for(var h=a.m,g=h.includes("#")&&Rb(h),l=c.length;l--;){b=c[l];var k=b.frameId;if(k!=f)if(k&&!b.cc&&(b.url==h||g&&b.url==g))f=a.Y=k;else continue;var m=b.parentFrameId;break}else c?m=c.parentFrameId:browser.runtime.lastError;else if(0<f?!a.c:null==f){if(f&&822083584<=E)return browser.webNavigation.getFrame({frameId:f,tabId:d},Qb.bind(this,a,!0));if(f||a.m)return browser.webNavigation.getAllFrames({tabId:d},Qb.bind(this,a,!0))}0<=
m&&(a.c=d+","+m);if(null!=f&&a.h){if(b=this.s[d+","+f])a.f=b.g,a.j=b.f,a.refresh=b.refresh,a.o=b.b,(c=b.Z)&&a.m!=c&&(a.Z=c),a.c||(a.c=b.c),(c=this.g[a.f])&&!c.port&&(c.port=a);this.a[d+","+f]=a;m=this.ga?1:null;c=a.i;d=[11,d,f,c,a.refresh,a.j,m&&cb[m]];c&&a.j&&(f=this.I[c],m=hb[c],c=gb[c],d.push(m&&cb[m]),fa(d,c.map(Sb(f)).map(Tb)));a.postMessage(d)}};
n.ea=M[M.length]=function Ub(a,b,c,e,d,f,h,g){var k=Vb(a);if(!k)return 0;var m=0<(k&32),p=1==(k&=7);if(p&&!m){if(!h)return Q(a,Ub.bind(this,a,b,c,e,d,f,!0)),-1;N(g)&&(g=R(g))}h=[k];k={};k[6]=Rb(a,p,this);k[50]=b;k[7]=c;k[8]=e;k[100]=d;k[102]=f;k[51]=g;k[54]=navigator.userAgent;k[121]=D?this.K:this.o;P(this,14,1,0,h,k);return 3};
n.Rb=M[M.length]=function Wb(a,b,c,e,d,f){if(c){var g=c.c;var l=c.K;var k=c.l}if(!e){if(!a||!a.length)return;f=Xb();g&&!l&&Q(g,d=S());for(var m of a)Q(m[0],f[f.length]=S());return T(Wb,this,a,b,c,!0,d,f)}d&&(l=R(d));for(m of a)m[5]=R(f.shift());b=0;c=[0];e={8:4};e[54]=navigator.userAgent;e[7]=g;e[110]=k;e[111]=l;e[121]=D?this.K:this.o;1<a.length&&(P(this,15,1,0,[a.length],e),b=16,e={});for(m of a)e[6]=m[0],e[100]=m[2],e[102]=m[3],e[50]=m[4],e[51]=m[5],P(this,14,1,b,c,e)};
function xb(a,b,c,e,d,f,h,g,l){if(!e||a.c[-8]){var k=a.a[b];if(k){var m=Jb(a);m.tabId=b;m.port=k;m.C=c;m.H=d;m.b=0;m.f=[];if(k=e&&!!f)m.I=!0,m.J=f,m.u=h,m.v=g,m.s=l,f.b||Yb(a,f);f=m.a;(e=e&&a.c[12])?(e=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/~/g,"(?:.*\\.)?"),e="^(?:http|https|ftp|ftps)://(?:[^\\/]*@)?(?:"+e+")(?::\\d+)?(?:\\W|$)"):e="^(?:http|https|ftp|ftps)://";m.g=Zb(a,b,[12,f,c,k||d,e]);m.A=0;m.g||Kb(a,m)}}}
n.Ob=function(a,b,c,e,d,f,h,g){if(a=this.D[b]){e&&(a.b+=e);h&&(a.c=h);g&&(a.l=g);if(d&&("string"==typeof d&&(d=JSON.parse(d)),d instanceof Array)){if(f)for(var l of d)l[4]=f;fa(a.f,d)}++a.A<a.g||(a.I?(e=a.tabId,(d=this.b[a.port.a])&&d.B==e&&a.b&&(f=a.s,h=d.a,g=d.b,P(this,10,1,0,[4294967295,d.l,Math.round(a.u*f+(d.h+h)*g),Math.round(a.v*f+(d.A+h)*g),0,a.b]),this.j=e,Zb(this,e,[13,!0]))):a.H?(e=0<a.b,this.Ia!=e&&(this.Ia=e,browser.contextMenus.update(this.M[2],{visible:e}),browser.contextMenus.refresh())):
(e=a.f,e.length?this.Rb(e,a.C,a):$b(a.tabId,"cannot_find_links")),Kb(this,a))}};n.tb=function(a,b,c,e){if(a=this.D[b])this.ea(a.j,a.o,a.c,a.i,c,e),Kb(this,a)};n.wb=function(a,b,c,e,d,f){this.ma(a,b,c,e);a=[b,a.tabId,a.f,a.i];b={};b[132]=e;b[134]=d;b[133]=f;P(this,23,1,0,a,b)};
n.X=M[M.length]=function ac(a,b,c){if(4294967295==a)this.j=null,c=!0;else{var d=this.f[a];if(d){c=d.a;if(!c)return;if(b)switch(c){case 3:return;case 2:break;default:d.a=3;window.setTimeout(ac.bind(this),1E3,a,!1,!0);return}d.a=0;c=!0}}c&&P(this,8,1,32,[a])};
n.Xb=function(a,b,c,e,d,f,h,g,l){var k=a.tabId,m=a.a,p=this.b[m],q=this.h[k];if(b){var r=this.D[b],t=r&&r.D;if(t){if(!c&&a.o){var A=this.a[a.c];if(A)return A.postMessage([15,b,null,t[6],t[17],t[50],t[31],t[133]])}var B;if(!e){if(!c||null==d){if(!a.b){c=a.ha;f="iframe";h=a.m;var u=!!c}if(!u){c=k;f=h=null;var C=!0}}a=this.ma(a,c,f,h);p=k==p.B&&!p.L&&(C||u||d)&&!q;!p||C||a.a||window.setTimeout(this.aa,3E3,m);var H=2;a.a=p?1:2;var I=(p?128:64)|(C?512:0);!g&&(B=this.a[k])&&(g=B.s)}U(this,t,H||1,I||0,m,
k,c,g,l);!H||C||q||bc(this,c,d);Kb(this,r)}}else e?(this.X(c,!0),delete this.f[c]):k!=p.B||p.L||q||(d?bc(this,c,d,!0):cc(this,c))};function dc(a,b){var c=a.b[b];if(c&&c.ca){var e=c.a,d=c.b;P(a,7,2,c.L?128:c.o?256:c.g?512:0,[b,Math.round((c.h+e)*d),Math.round((c.A+e)*d),Math.round((c.width-e-c.s)*d),Math.round((c.height-e)*d)])}}
function bc(a,b,c,e){var d=a.f[b];if(d&&d.a){var f=d.port,h,g=256;2==d.a&&(null==e&&(h=a.b[f.a])&&(e=f.tabId==h.B&&!h.L),e?(g|=128,d.a=1):g|=64);(e=d.c)&&!c&&(c=f.g);if(c){var l=c[0];var k=c[1];var m=c[2]||l+1;var p=c[3]||k+1;var q=c[4];if(c=!e&&f.g)l+=c[0],k+=c[1],m=Math.min(m+c[0],c[2]),p=Math.min(p+c[1],c[3]);if(f=a.a[f.tabId])var r=f.v}P(a,9,1,g,[b,l,k,m,p,q,r])}}
n.aa=function(a){var b=this.h,c=this.a,e=this.b,d=a?[e[a]]:V(e);a=[];e={};for(var f of d)!f||f.L||f.$||b[f.B]||a.push(f.B);if(a.length)for(var h of V(this.f))h.a&&(b=h.port,f=b.tabId,a.includes(f)&&((f=b.b?b:c[f])&&f.update&&(f.update=!1,f.postMessage([14,!1])),h.b?b.b?b.postMessage([15,null,h.id]):Yb(this,b,null,e):bc(this,h.id,null,!0)))};function ec(a,b){var c=a.b,e;if(b=null==b?V(c):(e=c[b])?[e]:null)for(e of b)Ab(a,e.B,void 0)}
function Ab(a,b,c,e){e=0!=e;var d=c?0:2;c=c?32:64;var f=a.f,h;for(h in f){var g=f[h];g.a&&g.port.tabId==b&&g.a!=d&&(e||g.b)&&(g.a=d,P(a,8,1,c,[h]))}}function cc(a,b){var c=a.f[b];c&&1==c.a&&(c.a=2,P(a,8,1,64,[b]))}function fc(a,b,c,e){var d=a.oa,f=(d&b)!=((c?255:128)&b);a.oa=c?d|=b:d&=~b;f&&(c=a.c[-1],b=a.c[-2],c=a.na=0!=c&&(d&c)==c,d=a.la=0!=b&&(d&b)==b,a.Ga=(c||d)&&e||null)}
n.ya=M[M.length]=function gc(a,b,c,e,d){var h=this.b[a];if(h)if(h.$?e&&(window.clearTimeout(h.$),h.$=null):e||(e=-1),0<=e)h.i|=b,h.j|=c,e&&(h.$=window.setTimeout(gc.bind(this),e,a));else{b|=h.i;c|=h.j;h.i=h.j=h.$=null;if(b){for(var g of V(this.i))g.b&&g.a==a&&(g.update=!0);d?this.R(d):browser.windows.get(a,this.R);browser.tabs.query({windowId:a,active:!0},this.R)}if(c){if((a=this.b[a])&&!a.L&&!a.$&&(a=a.B,!this.h[a])){b=this.f;for(var l in b)c=b[l],c.a&&c.port.tabId==a&&1==c.a&&P(this,8,1,1152,[l])}}else this.aa(a)}};
n.R=M[M.length]=function hc(a,b){browser.runtime.lastError;a instanceof Array&&(a=a.shift());if(a){var e=a.windowId||a.id,d=this.b[e];if(d){var f=!a.windowId;if(f){var h=b?d.b=this.ta:d.b,g=d.g="minimized"==a.state,l=d.o="maximized"==a.state;g||(z?(d.width=Math.round(a.width/h),d.height=Math.round(a.height/h),d.c=Math.round(a.left/h),d.f=Math.round(a.top/h)):(d.width=a.width,d.height=a.height,d.c=a.left,d.f=a.top),g=d.L,a=d.L="fullscreen"==a.state,h=l&&-d.c,0<h&&16>=h&&h==-d.f&&(d.a=h),a==g||b||(a?
ec(this,e):this.aa(e)))}else{if(d.C&&Ta(a.url))return;a.width&&(d.v=a.width);a.height&&(d.u=a.height)}if(!d.g){h=d.width;g=d.v;l=d.height;a=d.u;var k=g>h||a>l;if(k||!g||!a){f||k&&browser.windows.get(e,hc.bind(this));return}f=h-g;h=f/2;0<=h&&16>=h?(d.a=h,d.h=d.s=0):(h=d.a,D||la?d.h=f-2*h:d.s=f-2*h);f=l-a-2*h;f>=(d.D?20:50)&&f<=sa&&(d.A=f);d.C=!0}b||dc(this,e);return d}}};function zb(a,b){return a.h[b]?!0:(a=a.a[b])&&a.refresh?(a.refresh=!1,browser.tabs.reload(b),!0):!1}
n.Ub=function(a,b,c,e){a.m=b;a.u=c;a.refresh&&!e&&(a.refresh=!1);null==a.Y&&this.Na(a);this.aa(a.a);a.b&&this.H&&ic(this)};n.Wb=function(a,b,c,e,d){a.s=b;a.v=d;a=[a.f,a.tabId,a.a,e,d];e={};e[110]=b;e[128]=c;P(this,21,1,0,a,e)};
n.Yb=function(a,b,c,e,d){var f=a.tabId,h=this.a[f+","+c];if(h){var g=h.g;h.ha=e;if(h.g=d){var l=a.g;l&&(d[0]+=l[0],d[1]+=l[1],d[2]=Math.min(d[2]+l[0],l[2]),d[3]=Math.min(d[3]+l[1],l[3]));if(g&&g.join()!=d.join()){g=this.a;a=a.tabId+",";c=a+c;for(var k in g)k.startsWith(a)&&(l=g[k],l.c==c&&h.postMessage([16,b,l.Y,l.ha]))}}if(!this.h[f]){bc(this,e,d);for(var m of V(this.f))m.port==h&&m.a&&m.b&&!m.c&&h.postMessage([15,null,m.id])}}};
function Yb(a,b,c,e){a=a.a;c=[16,c];for(var d=[b],f;f=a[b.c];b=f){if(e)if(e[b.id])break;else e[b.id]=!0;d.push(f)}for(f=d.pop();b=d.pop();f=b)e=b.ha,c[2]=b.Y,c[3]=e,c[4]=e?null:b.m,c[5]=e?null:b.Z,f.postMessage(c)}function Zb(a,b,c){a=a.a;b+=",";var e=0,d;for(d in a)d.startsWith(b)&&(a[d].postMessage(c),e++);return e}
n.ja=function(a,b){var c={file:"content.js",runAt:"document_start",matchAboutBlank:!0};b&&!z?c.frameId=b:c.allFrames=!0;if(a instanceof Array)for(;b=a.shift();)try{b.discarded||browser.tabs.executeScript(b.id,c,O)}catch(e){}else if(b=a)try{browser.tabs.executeScript(b.id||b,c,O)}catch(e){}};function jc(a,b,c,e){null==c&&(c=b.l==a.J);c=17|(c?2048:1024)|(b.o?256:b.g?512:0);b=[b.l,b.ca,b.width,b.height,b.c,b.f,b.b];var d={};d[117]=e;P(a,6,2,c,b,d)}
n.Xa=M[M.length]=function kc(a,b,c){if(b){a={};for(var d of c)a[d.windowId]=d;for(var f of b)d=a[f.id],b=this.R(f,!0)||this.Va(f,!0,d),jc(this,b,f.focused,f.title||d&&d.title)}else{if(!a){try{browser.windows.getAll({windowTypes:["normal","popup"]},b=S())}catch(h){browser.windows.getAll(b)}browser.tabs.query({active:!0},c=S());return T(kc,this,1,b,c)}if(z&&1==a&&c){b=Xb();for(f of c)browser.windows.get(f.windowId,b[b.length]=S());return T(kc,this,2,b,c)}}};
n.Tb=M[M.length]=function lc(a,b){if(void 0===a)return mc("system.display",lc.bind(this));if(a){if(!b)return browser.system.display.getInfo(null,lc.bind(this,a));this.Ma=b[0].displayZoomFactor}};
n.wa=function(a,b){if(!this.u)return $b(b.id,"cannot_contact_idm");var c=a.linkUrl,e=a.pageUrl,d=e;if(a.menuItemId==this.M[4])return browser.downloads.search({query:[c]},this.Za.bind(this,c));if(a.menuItemId==this.M[1])c=a.frameUrl,c&&"about:blank"!=c||(c=e,d=null);else if(!c&&(c=a.srcUrl,(a=this.a[b.id+","+a.frameId])&&c)){var f=Jb(this);f.tabId=b.id;f.port=a;f.j=c;f.o=d;f.c=e;f.i=4;return a.postMessage([18,f.a,c])}c&&this.ea(c,d,e,4)};
n.Ha=function(a,b){if(!this.u)return $b(b.id,"cannot_contact_idm");xb(this,b.id,a.menuItemId==this.M[2])};n.Za=function(a,b){for(var c,e,d;c=b.pop();)c.exists&&"complete"==c.state?e||d||(d=c.referrer):(e||(e=c.referrer),browser.downloads.erase({id:c.id}));this.ea(a,e||d,null,4)};
n.xb=function(a){var b=a.sender.tab;if(b&&!(0>b.id)){a.name=a.name.split(":").shift();var c=a.id;null==c&&(c=a.id=this.bb++);var e=b.id,d="top"==a.name;a.tabId=e;a.a=0>b.index?null:b.windowId;a.h=!0;a.l=!1;a.update=d;a.b=d;a.Y=d?0:a.sender.frameId;a.A=0;a.m=a.sender.url||d&&b.url||null;a.Z=null;this.i[c]=a;d&&(this.a[e]=a);a.m&&(a.i=Nb(this,(new URL(a.m)).hostname));a.onMessage.addListener(this.yb.bind(this,a));a.onDisconnect.addListener(this.ka);this.Na(a)}};
n.ka=function(a,b){browser.runtime.lastError;if(a.h){a.h=!1;var c=a.tabId+","+a.Y,e=this.D,d=this.f,f,h=this.P,g=this.g,l,k;for(k in e)e[k].port===a&&delete e[k];for(k in d)if(f=d[k],f.port===a)this.X(k),delete d[k];for(var m in h)h[m]===a&&delete h[m];for(k in g)(l=g[k],l.port!==a||l.g)||delete g[k];this.Ga===a&&fc(this,255,!1);delete this.i[a.id];delete this.a[c];a.b&&delete this.a[a.tabId];if(z&&!b)browser.tabs.executeScript(a.tabId,{code:"__idm_connect__ && __idm_connect__(); true;"},O);else for(k in a=
this.s,a)c==a[k].c&&delete a[k]}};
n.yb=function(a,b){var c=b[0];b[0]=a;switch(c){case 21:this.Ub.apply(this,b);break;case 24:this.Wb.apply(this,b);break;case 22:this.Yb.apply(this,b);break;case 23:this.Xb.apply(this,b);break;case 41:this.wb.apply(this,b);break;case 25:this.ma.apply(this,b);break;case 26:xb(this,a.tabId,!0,!0,!1,a,b[1],b[2],b[3]);break;case 27:this.Ob.apply(this,b);break;case 28:this.X(4294967295);break;case 29:this.Qa.apply(this,b);break;case 30:this.Qa.apply(this,b);break;case 31:this.rb.apply(this,b);break;case 32:this.ub.apply(this,
b);break;case 39:this.sb.apply(this,b);break;case 33:this.nb.apply(this,b);break;case 34:this.qb.apply(this,b);break;case 35:this.tb.apply(this,b);break;case 36:this.Nb.apply(this,b);break;case 37:this.Ab.apply(this,b)}};
n.Ra=function(a){var b=a.type,c=a.o,e=a.l,d=a.a,f;if(1==b){var h=d[0];if(f=this.U[h])b=f.type,delete this.U[h]}switch(b){case 3:0<=this.V&&(this.V=-1,this.Da());e=this.qa=d[0];this.Ka=9>e;this.Ba=10<=e;this.fa=d[6];if(e=d[4])e/=96,this.ta=y&&1.245>e?1:e,this.Xa(),y&&this.Ma&&this.Tb();nc(this,d[5],a);oc(this,!0);this.Ea();break;case 4:f=this.c;this.l=!!(d[3]&2147483648);this.ga=!!(d[3]&1073741824);nc(this,d[2],a);oc(this);f[-9]=0<(e&64);f[-13]=0<(e&1024)||Pa;f[-8]=0<(e&32);f[-4]=0<(e&2);f[-11]=0<
(e&256)||2>c;f[-12]=0<(e&512)||2>c;f[-1]=d[0];f[-2]=d[1];f[12]=a[12];f[17]=a[17];W(f,a,1);W(f,a,2);W(f,a,3);W(f,a,4);W(f,a,10);W(f,a,9,2);W(f,a,11,2);W(f,a,20);W(f,a,21,1);pc(f,a,19);pc(f,a,18,1,1);vb(this);this.S||(this.S=!0,y&&browser.browserAction.enable(),this.G(1,browser.runtime.onConnect,this.xb),y&&this.G(1,browser.proxy.settings.onChange,this.Ta),y&&browser.proxy.settings.get({},this.Ta),this.G(1,browser.webNavigation.onCreatedNavigationTarget,this.vb),this.G(1,browser.webNavigation.onCommitted,
this.Sa),this.G(1,browser.webNavigation.onHistoryStateUpdated,this.ob),(a=this.c[17])&&this.G(2,browser.webRequest.onBeforeRequest,this.Gb,{urls:a.split("|"),types:Da},["blocking"]),Bb(this,!0),browser.tabs.query({url:K},this.ja));break;case 18:e=d[0];if(7<e)break;f=fb[e];d=this.I[e];for(var g in a)(g=parseInt(g))&&(102==g||110<g&&150>g)&&(d[g]=f.includes(g)?RegExp(a[g]):a[g]);15>this.qa&&2==e&&(d[124]="a:not([target])",d[125]="<div >:not(:only-child):not(video:first-child,img:first-child:nth-last-child(2))",
d[120]=4);e=this.I.map(qc(102)).filter(aa);this.Ca=RegExp("^https?://(?:"+e.join("|")+")","i");W(d,a,101,2);break;case 5:a=d[0];(d=this.b[a])?(e=0!=(e&128),d.L!=e&&(d.L=e)&&ec(this,a)):this.Wa(a);break;case 6:if(e&4)break;a=f.a[0];d=d[1];if(e=this.b[a])e.ca=d,dc(this,a);break;case 8:a=d[0];d=e&32;if(4294967295==a)Zb(this,this.j,[13,!1]),this.j=null;else if(a=this.f[a])a.a=d?0:2;break;case 11:a=d[0];4294967295==a&&(xb(this,this.j,!0,!0),this.j=null);break;case 12:try{var l=a.a[5],k=a[4];d=4==l?2:3;
if(1==l||2==l){if(Ob(this,a)){if(this.c[3].test(k))1==l?d=6:l=4;else if(this.c[-4]||this.c[4].test(k))d=6;a[8]|=256}if(3==d){var m=this.b[this.J];m&&this.h[m.B]&&(d=1)}}if(4==l)if(!this.Ka||a.a[6]||a.a[7]){switch(a.a[4]){case 1:a[7]||(a[7]=a[50]);break;case 3:a[7]||(a[7]=a[32]),a[50]||(a[50]=a[31])}this.Pb(a)}else U(this,a,1);else U(this,a,d)}catch(p){U(this,a,0)}break;case 13:a=f.a[0];e=f.a[5];d=d[1];g=3==d;if(3>=e)f.l&128?rc(this,a,g):X(this,a,g);else if(5==e)if(d){if(a=(f=this.g[a])&&f.i){g=f.method;
d=f.requestHeaders;if(e=f.f)(e=sc(e,Y(d,"Content-Type")))||(g="GET");a.timeout=1E4;a.onreadystatechange=this.zb.bind(this,a,f.id);a.open(g,f.url,!0);for(f=0;f<d.length;f++)g=d[f].name,c=g.toLowerCase(),c.startsWith("x-idm-")||(Ua(c)&&(g="X-IDM-"+g),a.setRequestHeader(g,d[f].value));a.send(e)}}else tc(this,a);break;case 20:d=a[123];e=!d;a=[a.j,0,0,0];f={};D&&(g=this.K)&&(f[122]=g,e||(e=g.substr(2).split(";",1).shift()==d));f[121]=this.o;P(this,1,1,e?2:4,a,f);break;case 22:this.Ya(d[0],d[1],a[131],
a[130]);break;case 1:break;default:!f&&e&1&&P(this,1,1,0,[a.j,0,0,0])}};n.Ya=M[M.length]=function uc(a,b,c,e,d){if(!z&&null==ua){if(void 0===d)return mc("notifications",uc.bind(this,a,b,c,e));ua=d||!1}ua&&(browser.notifications.create(a.toString(),{type:"basic",title:e||"",message:c,iconUrl:"images/logoSmall.png"},O),b&&window.setTimeout(browser.notifications.clear,1E3*b,a.toString(),O))};
n.Pb=M[M.length]=function vc(a,b,c,e){try{var f=a.b;if(!f)if(c)f=a.b=c;else if(e){var h=this.b[e.id],g=this.a[h&&h.B];g&&(f=a.b=g.id)}else if(!b&&(f=this.$a(a,c=S()),!f))return browser.windows.getLastFocused(e=S()),T(vc,this,a,!0,c,e);var l=this.i[f];if(!l)return U(this,a,0);h=this.b[l.a];if(!h||!h.ca)return U(this,a,1);(g=this.a[l.tabId])&&g.update&&(g.update=!1,g.postMessage([14,!0]));var k=Jb(this),m=a.a[8],p=[15,k.a,m];k.D=a;m||(l.b||Yb(this,l,k.a),p.push(a[6],a[17],a[50],a[31],a[133]));l.postMessage(p)}catch(q){U(this,
a,0)}};function U(a,b,c,e,d,f,h,g,l){-1!=c&&(d=[b.j,c,d,h,f],f={},f[8]=b[8],g&&(f[101]=g,f[128]=l),P(a,1,2,e|(0==c?4:2),d,f))}n.vb=function(a){Hb(this,a).a=!0;D&&browser.windows.get(a.windowId,this.R)};
n.Sa=function(a,b){var c=a.tabId,e=a.frameId,d=a.url,f=a.transitionType;f=f?f.endsWith("_subframe"):z&&0<e;var h=this.s[c+","+e];this.W!=c||Ta(d)||(this.W=NaN);if(!f&&this.h[c]){var g;if(g=h)g=h.i,g=d&&g&&(new URL(d)).hostname==(new URL(g)).hostname;yb(this,c,g)}h&&(h.i=d);if(g=this.a[c+","+e])if(this.j&&(a=this.b[g.a])&&a.B==this.j&&this.X(4294967295),b){if(d!=g.m){b=this.f;var l,k;for(k in b)if(l=b[k],l.port===g)2==g.i?cc(this,k):(this.X(k),delete b[k]);g.A++;g.m=d;g.b&&(g.update=!0);g.postMessage([17,
!0])}}else this.ka(g,!0),f&&"about:blank"==g.m&&this.ja(c,e);else f&&"about:blank"==d?(Hb(this,a),this.ja(c,e)):h&&h.a&&(h.m||!b)&&(h.a=!1)};n.ob=function(a){return this.Sa(a,!0)};
n.Va=function(a,b,c){var e=a.id;c={l:e,width:a.width,height:a.height,c:a.left,f:a.top,b:this.ta,a:8,A:ra,h:0,s:0,D:"popup"==a.type,L:"fullscreen"==a.state,o:"maximized"==a.state,g:"minimized"==a.state,B:c&&c.id,u:c&&c.height,v:c&&c.width,C:!D,ca:null,$:null};Object.setPrototypeOf(c,qb.prototype);this.b[e]=c;a.focused&&(this.J=e);b&&(browser.tabs.query({windowId:e,active:!0},this.R),browser.tabs.query({windowId:e,url:K},this.Vb),browser.tabs.query({windowId:e,url:K},this.ja));return c};
n.Vb=function(a){for(var b of a)Hb(this,0,!0,b.id,b.url)};n.Wa=function(a){P(this,5,1,32,[a]);delete this.b[a]};n.Mb=function(a){if(0<a){var b=this.b[a];b&&(this.J=a,b.ca||jc(this,b,!0),browser.windows.onBoundsChanged||browser.windows.get(a,this.R),zb(this,b.B),z&&this.ya(a,!1,!0,500))}else this.J=null};n.Lb=function(a){this.ya(a.id,!0,!1,-1,a)};n.Fb=function(a,b,c){var e=c.active;c=c.windowId;var d=e&&this.b[c];d&&(d.ca||jc(this,d));"complete"==b.status&&(a=this.a[a])&&!a.l&&(a.l=!0,e&&this.aa(c))};
n.Eb=function(a){var b=this.a,c=this.s,e=a+",";this.W==a&&(this.W=NaN);var d=b[a];d&&this.ka(d,!0);for(var f in b)f.startsWith(e)&&this.ka(b[f],!0);for(var h in c)h.startsWith(e)&&delete c[h];delete this.h[a]};n.Cb=function(a){var b=a.tabId;a=a.windowId;this.oa=0;this.j&&this.X(4294967295);var c=this.b[a];if(c){var e=c.B;c.B=b;this.W==e&&(this.W=NaN,window.setTimeout(browser.tabs.remove,250,e));Ab(this,e);browser.tabs.get(b,this.R);zb(this,b)||this.aa(a)}};
n.Db=function(a,b){b=b.newWindowId;var c=this.i,e;for(e in c)(e=c[e])&&e.tabId==a&&(e.a=b);Ab(this,a,!0)};n.Qa=function(a,b,c){if(a.b){var e=a.tabId;a=a.a;var d=this.b[a];this.j&&this.X(4294967295);if(d&&d.B==e){var f=!1;b&&(d.v=b,f=!0);c&&(d.u=c,f=!0);Ab(this,e,!1,f);this.ya(a,f,!1,500)}}else a.ha&&(b=this.a[a.c])&&b.postMessage([16,null,a.Y,a.ha])};n.rb=function(a,b,c){(b=ib[b])&&fc(this,b,c,a)};n.ub=function(a,b,c){0==b&&fc(this,128,c,a)};
n.sb=function(a,b,c,e){this.pa=a.id;a.eb=b;a.Aa=c;a.fb=e};n.nb=function(){fc(this,255,!1)};n.qb=function(a,b,c,e){var d=a.f;d&&(a=32,c=[d,null==c?(a|=16,-2):c],d={},d[110]=b,d[115]=e,P(this,16,1,a,c,d))};n.Nb=function(a,b,c){if(a=this.g[b]){b=[b,0];var e={};e[115]=c;P(this,16,1,48,b,e);a.o=!1;a.S&&X(this,a)}};n.Ab=function(a,b,c,e){P(this,19,2,0,[b,c,a.tabId,a.f],e)};function tc(a,b){if(b=a.g[b]){var c=b.i;b.o=!1;b.i=null;b.S&&X(a,b);c&&c.abort()}}
n.zb=function(a,b){if(4==a.readyState){var c=[b,0],e={};200==a.status&&(e[115]=a.response);P(this,16,1,48,c,e);tc(this,b)}};function wc(a,b){var c=a.c;if(b.s||a.h[b.tabId]||!c[-9])return 1;if(b.h)return 6;if(b.c&&c[-4])return 1;var e=b.O,d=b.P=Z(e.pathname);return c[9].test(e.hostname)||c[19].test(e.href)?1:2==(b.b&7)&&(b.J||c[-13])?e.pathname.endsWith("/")||c[21].test(e.pathname)?1:c[1].test(d)||a.l&&!c[20].test(d)?4:1:6}
function xc(a,b){var c=!b.a;if(b.h&&c)return 3;var e=a.c,d=e[18],f=e[1],h=b.O,g=b.P,l=b.j||(h.search?null:g),k=b.c,m=Ea.includes(b.type),p=!b.J,q=!m&&d.exec(h.href);if(q){var r=d.Zb,t=d.$b,A=d.ac,B=d.bc;for(d=1;d<q.length;++d)if(q[d]){r=r[--d];if(null===r)break;q=0;var u=r.includes("V")|r.includes("A")|r.includes("C");if(k&&!u&&!r.includes("S")||p&&r.includes("D"))return 1;if(r.includes("G")){var C=!0;q|="GET"==b.method}r.includes("P")&&(C=!0,q|="POST"==b.method);if(C&&!q)break;if(q=B[d]){q=q.exec(h.href);
if(!q)break;h=t[d];if(t=h.F){var H=!0;var I=q[t]}if(t=h.T){H=!0;var G=q[t]}}G||(G=Z(I)||r.includes("T")&&(H=!0,g)||A[d]);if(u)return G&&(b.P=G),k||(b.c=!0),b.a=!0,6;if(c&&(G?f.test(G):!H))return b.M=16777216,4;break}}if(!c)return 6;if(l&&(m&&e[2].test(l)||k&&e[4].test(l)))return 1;if((D||a.C)&&(b.J||e[-13])){if(k&&e[3].test(l))return 6;if((!k||a.l)&&l&&f.test(l))return b.M=8,4}return 6}
function yc(a,b){if(b.ga)return a.da(6,b),6;var c=b.statusCode;if(200!=c&&206!=c&&304!=c)return 1;var e=Y(b.responseHeaders,"Content-Type"),d=Y(b.responseHeaders,"Content-Disposition"),f=zc(e).toLowerCase(),h="attachment"==zc(d).toLowerCase();c=b.c;var g=b.v;if(b.fa=g&&!h&&"text/html"==f){if(b.g){var l=Ib(a,b);l&&(l.f=!0);a.da(5,b)}return 1}if(c?b.s:b.a)return 1;if(a.l&&g&&h)return 4;var k,m,p,q=a.c,r=b.O,t=r.hostname,A=r.pathname;d=(e=Ac(d,"filename")||Ac(e,"name"))&&Z(e);if(e)if(d){b.u=e;var B=
p=!0}else if(!c)return 1;p||(e=A.split("/").pop(),(d=b.P||Z(e))&&d.toLowerCase()==f.split("/").pop()&&(B=!0));if(!B){var u=q[10].test(f),C=kb[f];if(C)if(C=C.split("|"),d&&C.includes(d))B=!0;else if(c?!u:!d){B=!0;var H=u;d=C[0]}!B&&d&&(h&&g?B=!0:u?B=H=!0:C||Wa(d)||(B=H=!0))}if(c){C=Nb(a,t);g=a.I[C];u=A+r.search;switch(C){case 1:if(g[111].test(u))var I=B=!0;else if(g[112].test(u))var G=!0;else if(g[115].test(u)&&"application/json"==f)var ia=!0;else if(g[113].test(u)&&"application/x-www-form-urlencoded"==
f||g[114].test(u)&&"video/vnd.mpeg.dash.mpd"==f)var ja=!0;break;case 2:(t=g[111].exec(u))&&(Va(f)||"text/html"==f)?(f=t[1]&&g[112].exec(b.port.m))&&t[1]!=f[1]||(ja=!0):g[114].test(u)?ia=!0:h&&"image"==b.type&&"MP4"==d&&(m=!0);break;case 3:"M4S"==d&&(B=!0);t==g[111]&&g[112].test(A)&&Va(f)&&(ja=!0);break;case 4:g[111].test(u)&&Va(f)&&(ia=!0);break;case 5:g[111].test(u)&&"text/html"==f&&(ia=!0);break;case 6:g[111].test(u)&&(ja=!0);break;case 7:g[111].test(A)&&(ia=!0)}B&&("M3U8"==d||"F4M"==d||a.Ba&&"MPD"==
d?ja=!0:"F4F"==d&&(e.endsWith("Seg1-Frag1")||e.endsWith("Seg1-Frag2")||e.includes("Seg1-Frag2_"))&&(k=!0));"ASF"==d&&((f=Y(b.responseHeaders,"Content-Length"))&&102400>=parseInt(f)&&(m=!0),"DCLK-AdSvr"==Y(b.responseHeaders,"Server")&&(m=!0))}if(m)return 1;B&&(c&&q[3].test(d)?I=!0:c&&q[4].test(d)?b.a=!0:!b.a&&q[1].test(d)&&(l=!0));if(I){var Lb,Mb;if(m=q[11])m.test(r.hostname)?I=!1:(Lb=a.a[b.tabId])&&(Mb=Lb.m)&&m.test((new URL(Mb)).hostname)&&(I=!1)}if(ia)G=b.o=!0;else if(ja||k)"POST"!=b.method||b.f?
(a=new XMLHttpRequest,a.responseType=k?"blob":"text",b.i=a,G=!0):G=!1;if(!l&&!I&&!G)return 1;B&&(b.j=d);p&&(b.u=e);b.g|=G;b.M=I||G?256:16|(c?4096:0)|(H?8388608:0);return l?4:I?2:5}
n.da=M[M.length]=function Bc(a,b,c,e,d,f){var g=b.url,l=b.b||Vb(g),k=1==(l&7),m=b.requestHeaders;if(k&&!e&&!d&&(f=Y(m,"Cookie"),null==f))return Q(g,Bc.bind(this,a,b,c,e,!0)),!0;N(f)&&(f=R(f));var p=b.id,q=b.port&&b.port.id,r=b.timeStamp,t=c?w(c.timeStamp-r):null,A=b.M,B=b.responseHeaders;d=b.U;var u=c&&c.ip;c=0;3==(u?u.length-u.replaceAll(".","").length:0)?A|=33554432:2<(u?u.length-u.replaceAll(":","").length:0)&&(A|=4194304);l&16&&(A|=2097152);"POST"==b.method&&(A|=512);4>a&&(D||e)&&(c|=1);b.g&&
b.i&&(c|=1);b.g&&5!=a&&(c|=32);b.c&&(c|=16);b.I&&(c|=8192);b.v&&(c|=b.A?2048:4096);l=[p,q,r.toFixed(),b.statusCode,l&7,a,b.tabId,b.frameId];p={};16>this.qa&&(l[2]=w(r/1E3),l[3]=w(r%1E3*1E3));p[6]=Rb(g,k&&4>a,this);p[12]=b.statusLine;p[17]=b.Z;p[4]=b.j;p[100]=b.u;p[8]=A;p[129]=t;p[122]=this.o;p[11]=Cc(m);p[13]=Cc(B);p[18]=Cc(d);b.f&&(p[14]=sc(b.f,Y(m,"Content-Type")));b.K&&(p[19]=sc(b.K,Y(d,"Content-Type")));if(null==m){a=this.s;g=b.tabId+","+b.frameId;do g=(k=a[g])&&k.c,k=k&&k.m,"about:blank"==k&&
(k=null);while(!k&&g);p[50]=k;p[51]=f;p[54]=navigator.userAgent}D&&(p[122]=Db(this,b.proxyInfo,Y(m,"Proxy-Authorization")),p[55]=Db(this,b.V,Y(d,"Proxy-Authorization")));if(!b.fa||!b.A)if(b=this.a[b.tabId])p[7]=b.m;return P(this,13,1,c,l,p,e)};
n.ia=M[M.length]=function Dc(a,b,c,e,d){if(0==a)b.D=e,b.C=d,Gb(this,b);else{this.H&&ic(this,!0);e=this.C?new XMLHttpRequest:null;d=this.da(a,b,c,e);e&&(d=(e=d&&parseInt(e.getResponseHeader("x-idm-status")))?3==e:this.da(a,b,c));if(d)return Qa&&!c?void(b.H=!0):D?new Promise(Dc.bind(this,0,b,null)):X(this,b,!0);b.a=!0}};
function X(a,b,c){var e=a.g,d;if(N(b)){var f=b;b=f.id}else if(!(f=e[b]))return;if(c){if(f.v||f.I){var h=0<f.statusCode||!f.requestHeaders,g=Ib(a,f);g&&g.a&&f.A?browser.tabs.remove(f.tabId):y&&h&&!f.I?d={redirectUrl:"javascript:void(0)"}:z&&h?d={redirectUrl:Ec(f,g)}:Sa&&h&&(d={redirectUrl:a.A||Ec(f,g)})}d||(d={cancel:!0});f.H=!0}(a=f.D)&&void 0!==c&&(f.D=f.C=null,a(d||{}));if(c=f.C)f.D=f.C=null,c();if(f.i||f.o)return f.S=!0,d;delete e[b];z&&delete e[f.requestId];return d}
n.jb=function(a){(this.l||a.byExtensionId)&&!this.la&&this.c[-9]&&Vb(a.finalUrl||a.url,!0)&&(this.O[a.id]=a,browser.downloads.pause(a.id,O))};
n.kb=function(a,b){var c=a.id,e=this.O;if(!e[c])return!1;var d=this.c,f=a.finalUrl||(a.finalUrl=a.url),h=new URL(f),g=a.b=Vb(f,!0),l=a.j=Z(a.filename||h.pathname);if(!(a.h=this.na)&&!this.l&&(!d[1].test(l)||d[9].test(h.hostname)||d[19].test(h.href)))return rc(this,c);a.Sb=b;e[c]=a;if(1==g){if(!a.referrer){b=this.i;c=this.b;for(var k in b)if(e=b[k],e.m==f&&(a.referrer=e.u,(d=c[e.a])&&d.B==e.tabId))break}var m;Q(f,k=S());a.url==f||Q(a.url,m=S());T(this.Pa,this,a,k,m);return a.Oa=!0}return this.Pa(a)};
n.Pa=function(a,b,c){var e=Date.now();e=[a.id,0,w(e/1E3),w(e%1E3*1E3),a.b,2];var d={};d[6]=Rb(a.finalUrl);d[4]=a.j;d[103]=a.totalBytes||null;d[100]=a.filename||null;d[127]=a.mime||null;d[8]=a.h?2048:0;d[50]=a.referrer||null;d[51]=R(b);d[54]=navigator.userAgent;d[122]=this.o;a.finalUrl!=a.url&&(d[17]=Rb(a.url),d[56]=R(c));return P(this,13,1,129,e,d)||rc(this,a.id)};
function rc(a,b,c){var e=a.O[b];if(e){if(c)return browser.downloads.cancel(b,O),!0;e.Oa&&(e.Oa=!1,e.Sb());browser.downloads.resume(b,O);delete a.O[b]}return!1}n.ib=function(a){if(!(0>a.tabId||a.initiator==Na||this.ga||a.url.startsWith(La)&&a.type.endsWith("_frame")&&(Sa||z)||a.url.startsWith(Ma)&&"main_frame"==a.type))return{cancel:!0}};
n.Gb=function(a){var b=new URL(a.url);if(b.search.startsWith("?d=")){var c=this.a[a.tabId];this.ea("idmreg:"+b.href.substr(b.protocol.length),null,c&&c.m);X(this,a.requestId);(b=Ib(this,a))&&b.a&&"main_frame"==a.type&&browser.tabs.remove(a.tabId);return{redirectUrl:La+"register=1"}}};
n.Ua=function(a){var b=a.type,c=a.tabId,e=a.frameId;if(!(pa&&!Ga.includes(b)||0>c&&0==e)){var d=a.url,f=a.method,h=Vb(d);if(h&&("GET"==f||"POST"==f)&&d!=this.A){var g=a.id=z?String(this.cb++):a.requestId;g=this.g[g];var l=this.la,k="POST"==f,m="image"==b,p=y&&0>c&&"other"==b,q=!p&&0>c&&0>e,r=0<c&&b.endsWith("_frame");if((f=q?null:this.a[c+","+e])||r||q||p||g){D&&k&&g&&bb(g.statusCode)&&(a.method="GET",k=!1);r&&Hb(this,a,!1);if(!l&&k&&a.requestBody){k=a.requestBody;var t=k.raw;if(t)for(var A=0;A<t.length&&
(t[A].bytes||(t=null));A++);if(!(t||k.formData||y&&k.error))return}if((k=this.pa)&&(t=f?f.id==k&&f:this.i[k])&&d==t.Aa){p=t.eb;if(k=t.fb)a.u=k,a.j=Z(k);f||(f=t);this.pa=null}k=new URL(d);k.hash="";a.O=k;a.b=h;a.h=this.na;a.s=l;a.A=r&&"main_frame"==b;a.v=r;a.I=p;a.ba=q;a.c=q||Fa.includes(b);a.a=m;a.g=this.Ca.test(d);a.f=a.requestBody;a.port=f;a.J=h&8||(D?a.proxyInfo&&"https"==a.proxyInfo.type:this.ba[h]);0>c&&(a.tabId=null);0>e&&(a.frameId=null);g&&(a.id=g.id,a.port=f=g.port,a.h=g.h,a.s=g.s,a.Z=g.Z||
g.url,a.U=g.U||g.requestHeaders,a.K=g.K||g.f,D&&(a.V=g.V||g.proxyInfo));if(a.c&&!m){b=this.P;for(c=b.Qb;30<=c.length;)delete b[c.shift()];b[d]=f;c.push(d)}switch(a.l=wc(this,a)){case 1:a.a=!0;case 6:Gb(this,a);break;case 4:return this.ia(1,a)}}}}};
n.Hb=function(a){var b=this.g[a.requestId];if(b){var c=b.requestHeaders=a.requestHeaders;b.timeStamp=a.timeStamp;if(!b.H){if(b.ba&&!b.port&&(a=Y(c,"Referer")))for(var e of V(this.i))if(e.m==a){b.port=e;break}D&&b.proxyInfo&&Db(this,b.proxyInfo,Y(c,"Proxy-Authorization"),!0);if("POST"==b.method&&(!b.f||b.f.error&&0<Y(c,"Content-Length")))return X(this,b);switch(b.l=xc(this,b)){case 1:b.a=!0;break;case 4:return this.ia(1,b);case 3:return this.ia(3,b)}}}else if(0>a.tabId&&"xmlhttprequest"==a.type&&(a.initiator?
a.initiator==Na:a.originUrl?a.originUrl==Oa:1)){b=a.requestHeaders;c={};e=!1;for(a=0;a<b.length;a++){var d=b[a],f=d.name.toLowerCase();f.startsWith("x-idm-")?c[f.substr(6)]=e=!0:"origin"==f&&d.value==Na&&(c[f]=e=!0)}if(e){for(a=0;a<b.length;a++)d=b[a],f=d.name.toLowerCase(),c[f]?b.splice(a--,1):f.startsWith("x-idm-")&&(d.name=d.name.substr(6));return{requestHeaders:b}}}};
n.Jb=function(a){var b=this.g[a.requestId];if(b){var c=b.statusLine=a.statusLine,e=b.statusCode=a.statusCode||parseInt(c.split(" ",2).pop());if(b.H||204==e&&c.includes(" IDM "))return X(this,b,!0);c=b.responseHeaders=a.responseHeaders;b.ga=ab(e);if("image"==b.type&&(e=Y(c,"Content-Type"))&&e.toLowerCase().startsWith("image"))return X(this,b);"quic"==Y(c,"Client-Protocol")?b.b|=16:(e=Y(c,"Alternate-Protocol"))&&e.endsWith(":quic,p=0")&&"chunked"!=Y(c,"Transfer-Encoding")&&(b.b|=16);switch(b.l=yc(this,
b)){case 1:return X(this,b);case 4:return this.ia(2,b,a);case 3:return this.ia(3,b,a)}if(b.o)return c.push({name:"X-IDM-Request-ID",value:b.id.toString()}),{responseHeaders:c}}};n.Kb=function(a){var b=this.g[a.requestId];if(a.type.endsWith("_frame")&&(200==a.statusCode||304==a.statusCode)){var c=Ib(this,a);c&&(c.m=a.url,c.Z=c.j)}b&&(2==b.l?this.da(4,b,a):5==b.l&&this.da(5,b,a),X(this,b))};n.Ib=function(a){X(this,a.requestId)};
n.Ea=M[M.length]=function Fc(a,b,c,e,d){var h=ka&&"llbjbkhnmlidjebalopleeepgdfgcpec"==browser.runtime.id&&"ngpampappnmepgilojfohadhhmbhlaek";if(!a){if(this.La)this.La=!1;else return;browser.storage.local.get("version",b=S());(D?1124073472<=E:z?1073741824<=E:1)&&browser.extension.isAllowedIncognitoAccess(c=S());y&&browser.management.get("jeaohhlajejodfjadcponpnjgkiikocn",e=S());ka&&browser.management.get(h||"llbjbkhnmlidjebalopleeepgdfgcpec",d=S());return T(Fc,this,!0,b,c,e,d)}N(e)&&e.enabled&&browser.management.setEnabled(e.id,
!1);N(d)&&d.enabled&&browser.management.setEnabled(h||browser.runtime.id,!1);N(b)&&(b=b.version||"");if((d=ta.version||"")&&d!=b&&null!=b&&(browser.storage.local.set({version:d}),D||browser.storage.local.remove("disabled"),a=this.ua,e=this.sa,!b||!a||e)){d="current="+escape(d);b&&(d+="&previous="+escape(b));a&&(d+="&manager="+(a?[a>>24&255,a>>16&255,a>>8&255,a&255].join("."):""));e&&(d+="&update=1");null!=c&&!c&&(d+="&incognito=1");D&&(d+="&mzffox=1");la&&(d+="&opera=1");if(z||ka)d+="&msedge=1";browser.tabs.create({url:Ma+
d},function(g){g&&(this.W=g.id)}.bind(this))}};function nc(a,b,c){null==b&&(b=(b=$a(c[13]))?b[1]<<24|b[2]<<16|b[3]<<8:0);a.ua=b||0}function oc(a,b){(a.sa=103089920>a.ua)?a.H=null:a.H=6E4*w(120*x()+60)*(b?1:2)+Date.now()}function ic(a,b){if(b||a.H<Date.now()){a.H=6E4*w(240*x()+120)+Date.now();var c="xup://"+x().toString(36).substr(2);b?a.ea(c):window.setTimeout(a.ea,w(5E3*x()+5E3),c)}}
function $b(a,b){b=browser.i18n.getMessage(b);D?browser.tabs.executeScript(a,{code:'window.alert(unescape("'+escape(b)+'")); true;'},O):window.alert(b)}n.G=function(a,b,c){if(null!=b){var e=ea(arguments);if(D||z)e[2]=function(){return c.apply(null,arguments)};this.za.push(e);b.addListener.apply(b,e.slice(2))}};
n.Fa=function(){for(var a=arguments.length?ea(arguments):null,b=this.za,c=0;c<b.length;c++)if(!a||a.includes(b[c][0])){var e=b.splice(c--,1).pop(),d=e.splice(0,2).pop();z&&e.splice(1);d.removeListener.apply(d,e)}};function S(){function a(b){browser.runtime.lastError;a.a?a.a(b):a.c=b;a.b=!0}return a}S.prototype=Object.create(Function.prototype);function Xb(){var a=[];Object.setPrototypeOf(a,Xb.prototype);return a}Xb.prototype=Object.create(Array.prototype);
function T(a,b,c){if(this instanceof T){c instanceof Array||(c=ea(arguments,2));for(var e=0,d=0,f=Function.prototype.bind.bind(this.g,this),h=0;h<c.length;h++){var g=c[h];if(g instanceof Function)g.b?(c[h]=g.c,d++):(g.a=f(h,null),e++);else if(g instanceof Xb)for(var l=0;l<g.length;l++){var k=g[l];k.b?(g[l]=k.c,d++):(k.a=f(h,l),e++)}}e?(this.c=a,this.f=b,this.a=c,this.b=e):d&&(this.h=d,a.apply(b,c))}else return e=new T(a,b,ea(arguments,2)),e.b||e.h}
T.prototype.g=function(a,b,c){var e=this.a;if(null===b)for(var d=2;d<arguments.length;d++)e[a++]=arguments[d];else e[a][b]=c;0==--this.b&&(this.c.apply(this.f,e),delete this.c,delete this.f,delete this.a)};function va(a){return browser.i18n.getMessage(a)||a}function Rb(a,b,c){var e=a.lastIndexOf("#");e>a.indexOf("?")&&"!"!=a[e+1]&&(a=a.substr(0,e));b&&!Xa(a)&&(c.sa?a="idm0x00000001"+a:a.startsWith("xup")&&(a="idm0x00000002"+a.slice(3)));return a}
function Ec(a,b){var c=a.port;b=b&&!b.h;var e=new URL(c&&c.m||a.url);z&&(c&&a.url==c.Aa||(b=!1));return La+(b?"back=1":"host="+e.hostname)}function Q(a,b){z&&a.startsWith("ftp:")?b([]):(a={url:a},oa&&(a.firstPartyDomain=null),browser.cookies.getAll(a,b))}function R(a){var b="";if(a&&a.length)for(var c=0;c<a.length;c++)b&&(b+="; "),b+=a[c].name,b+="=",b+=a[c].value;return b}
function Cc(a){if(!a||!a.length)return null;var b=[],c;for(c of a)b.push(c.name,": "),null!=c.value?b.push(c.value):c.binaryValue&&b.push(new Uint8Array(c.binaryValue)),b.push("\r\n");return b}function Y(a,b){if(!a)return null;b=b.toLowerCase();for(var c of a)if(c.name.toLowerCase()==b){if(null!=c.value)return c.value;if(c.binaryValue)return String.fromCharCode.apply(null,c.binaryValue)}return null}
function Ac(a,b){if(!a)return null;a=a.split(";");for(b=b.toLowerCase();a.length;){var c=a.shift(),e=c.indexOf("=");if(0<e){var d=c.slice(0,e).trim().toLowerCase(),f=d.endsWith("*");if(f)d=d.slice(0,-1).trimRight();else if(g)continue;if(d==b){c=c.substr(e+1).trim();e=c.length-1;if('"'==c[0]?'"'==c[e]:"'"==c[0]&&"'"==c[e])c=c.slice(1,e);if(f&&c.includes("'")){if(c=c.split("'",3),f=c.shift().toLowerCase(),(e="utf-8"==f||"utf8"==f)||!g){var h=unescape(c.pop());var g=f;if(e)break}}else h=unescape(c)}}else 0>
e&&null==h&&c.trim().toLowerCase()==b&&(h="")}return h}function zc(a){const b=/[;,]/;return a&&(a=a.split(b,1).shift().trim())&&!a.includes("=")&&unescape(a)||""}
function sc(a,b){var c=a.raw;if(c){var e=String.fromCharCode;a="";for(b=0;b<c.length;b++){var d=c[b].bytes;if(!d)return null;d=new Uint8Array(d);for(var f=d.length,h=0;h<f;h++)a+=e(d[h])}return a}c=a.formData;if(!c)return null;d=zc(b).toLowerCase();a=[];if(d&&"application/x-www-form-urlencoded"!=d)if("multipart/form-data"==d){(d=Ac(b,"boundary"))||(d="----WebKitFormBoundary"+x().toString(36).substr(2));for(e in c)for(f=c[e],b=0;b<f.length;b++)a.push("--",d,'\r\nContent-Disposition: form-data; name="',
e,'"\r\n\r\n',f[b]||"","\r\n");a.push("--",d,"--\r\n")}else return null;else for(e in c)for(f=c[e],e=e.split(" ").map(encodeURIComponent).join("+"),b=0;b<f.length;b++)a.length&&a.push("&"),a.push(e,"=",(f[b]||"").split(" ").map(encodeURIComponent).join("+"));return a.join("")}function Z(a){return(a=Za(a))?a.pop().toUpperCase():""}function Vb(a,b){a=a.split(":",1).shift().toLowerCase();a=jb[a]||0;return b?a&7:a}
function mb(a){for(var b=a.length,c=b,e=0;e<c;){var d=a.charCodeAt(e++);128<=d&&(2048<=d?(b+=2,d-55296&56320||e++):b++)}return b}
function Gc(a,b){browser.runtime.lastError;if(void 0===a){b=navigator.userAgent;a=b.match(/\b(?!(?:Safari|Chrome|Gecko)\/)\w+\/(\d+)(?:.(\d+))?(?:.(\d+))?(?:.(\d+))?\b(?!.*[()])/);b=D?a:b.match(/\bChrome\/(\d+)\.(\d+)\.(\d+)\.(\d+)\b/);if(!b)return!1;E=b[1]<<24|b[2]<<22|b[3]<<8|b[4];na=b[0];F=a?a[0]:b[0];y&&navigator.brave&&(F=F.replace("Chrome/","Brave/"));browser.runtime.getBrowserInfo&&browser.runtime.getBrowserInfo(Gc);try{D&&browser.privacy.websites.firstPartyIsolate.get({},Gc)}catch(e){}a=browser.webRequest.ResourceType;
if(a){if(a.MEDIA){Ga.push("media");Fa.push("media");var c=!0}if(a.OBJECT_SUBREQUEST||(pa=D&&922746880>E))Ga.push("object_subrequest"),Fa.push("object_subrequest")}y&&(c||Fa.push("other"));D&&922746880>E&&Fa.push("other");y&&browser.management.get("clhiejnehegdfknplplojohghjaklbae",Gc.bind(this,{}));Hc(1,"debug.js");Hc(2,"document.js")}else b?(qa=!0,F=F&&F.replace("Chrome/","Epic/")):"version"in a?(b=a.version.split(/\D+/),53<=b[0]&&(E=b[0]<<24|b[1]<<22|b[2]<<8|b[3],na=F=a.name+"/"+a.version,Sa=939524096>
E)):"value"in a&&(oa=a.value);return!0}function Hc(a,b,c){c?4==c.readyState&&(cb[a]=btoa(c.responseText)):(c=new XMLHttpRequest,c.responseType="text",c.onreadystatechange=Hc.bind(null,a,b,c),c.open("GET",browser.runtime.getURL(b)),c.send())}
function W(a,b,c,e){if(b=b[c]||void 0)try{b=b.replace(/^\|+|\|+(?=\||$)/g,"").replace(/\./g,"\\."),b=1==e?b.replace(/\?/g,"[^/\\\\]").replace(/(^|[^*])\*(?!\*)/g,"$1[^/\\\\]*").replace(/\*\*/g,".*?"):b.replace(/\?/g,".").replace(/\*/g,".*?"),2==e&&(b=b.replace(/~/g,"(?:\\b[^.]+\\.)?")),b=RegExp("^(?:"+b+")$",1==e?"":"i")}catch(d){b=null}a[c]=b||Ca}
function pc(a,b,c,e,d){b=b[c];var f=[],h=[],g=[],l=[];if(b)try{b=b.replace(/^\|+|\|+(?=\||$)/g,"").replace(/[.?+(){}[\]]/g,"\\$&").replace(/\*(?=[^:/|&]*:\/\/)/g,"\\w%%").replace(/(:\/\/[^:/]*?)~/g,"$1(?:\\b[^./]+\\.)?").replace(/\\\?(?=\||$)/g,"(?:$&.%%)?");if(e){for(var k=b.replace(/(^|\|)(?:([A-Z]+)?(?:#(\w+))?!)?[^|]+/g,"$1$2|$3").split("|");k.length;){var m=k.shift();f.push(Ya(m)?m:null);h.push(k.shift())}b=b.replace(/(^|\|)[\w#]+!/g,"$1")}if(d){k=b.replace(/(^|\|)(?:(?=[^|]+?<[A-Z]:.*?>)|[^|]+)/g,
"$1").split("|");m=/<([A-Z]):(.*?)>/g;for(var p={F:"[^/\\?#&;]%%",T:"[^/\\?#&;.]%%"},q,r=0;k.length;++r)if(q=k.shift()){for(var t={},A=["^"],B="",u,C=1;u=m.exec(q);++C)t[u[1]]=C++,B=RegExp.rightContext,A.push(RegExp.leftContext,"(",u[2].replace(/\*/g,p[u[1]]||".%%?"),")");A.push(B,"$");g[r]=t;l[r]=RegExp(A.join("").replace(/\*/g,".*?").replace(/%%/g,"*"))}b=b.replace(m,"(?:$2)")}b=b.replace(/\*/g,".%%?").replace(/%%/g,"*");b=e||d?RegExp("^(?:("+b.replace(/\|/g,")|(")+"))$"):RegExp("^(?:"+b+")$")}catch(H){b=
null}a[c]=b||(b=/(?!)/);e&&(b.Zb=f,b.ac=h);d&&(b.$b=g,b.bc=l)}function Tb(a){return N(a)?a.source.replace("\\/","/"):a}function mc(a,b){b&&browser.runtime.lastError||browser.permissions.request({permissions:[a]},b)}function O(a){browser.runtime.lastError;a;!0}const Sb=Function.bind.bind(function(a){return this[a]}),qc=Function.bind.bind(function(a){return a&&a[this]});var N=Object.isExtensible;try{N(null)}catch(a){N=function(b){return b instanceof Object}}var V=Object.values;V||(V=function(a){return Object.keys(a).map(Sb(a))});
Array.prototype.fill||(Array.prototype.fill=function(a){for(var b=this.length;b--;this[b]=a);return this});String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b){return this.split(a).join(b)});
const Fb=[[!0,-11,"menu_download_link","link,image,video",L.prototype.wa],[!0,-11,"menu_download_link","page,frame,editable",L.prototype.wa,Ja],[!0,-11,"menu_download_selected","selection",L.prototype.Ha],[!0,-12,"menu_download_all","page,frame,editable",L.prototype.Ha],[y,-11,"menu_download_item","link",L.prototype.wa,["chrome://downloads/*"]]];M.splice(0);Gc()&&new L;
